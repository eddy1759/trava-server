{
"info": {
    "_postman_id": "trava-api-collection-1",
    "name": "Trava API Collection",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Trava API - Auth, Trip, Journal Entry, and Photo endpoints (Part 2)"
},
"item": [
    {
        "name": "Auth",
        "item": [
            {
            "name": "Register",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/register",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "register"]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"TestPassword123!\",\n  \"fullName\": \"Test User\",\n  \"username\": \"testuser\"\n}"
                }
            },
            "event": [
                {
                "listen": "test",
                "script": {
                    "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "pm.test(\"Response has token\", function () {",
                    "    const response = pm.response.json();",
                    "    pm.expect(response.data.token).to.exist;",
                    "    pm.environment.set(\"TOKEN\", response.data.token);",
                    "    pm.environment.set(\"USER_ID\", response.data.user.id);",
                    "});"
                    ],
                    "type": "text/javascript"
                }
                }
            ]
            },
            {
            "name": "Login",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/login",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "login"]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"TestPassword123!\"\n}"
                }
            },
            "event": [
                {
                "listen": "test",
                "script": {
                    "exec": [
                    "pm.test(\"Status code is 200\", function () {",
                    "    pm.response.to.have.status(200);",
                    "});",
                    "pm.test(\"Response has token\", function () {",
                    "    const response = pm.response.json();",
                    "    pm.expect(response.data.token).to.exist;",
                    "    pm.environment.set(\"TOKEN\", response.data.token);",
                    "});"
                    ],
                    "type": "text/javascript"
                }
                }
            ]
            },
            {
            "name": "Verify Email",
            "request": {
                "method": "GET",
                "url": {
                "raw": "{{BASE_URL}}/api/auth/verify-email?token={{TOKEN}}",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "verify-email"],
                "query": [
                    { "key": "token", "value": "{{TOKEN}}" }
                ]
                }
            }
            },
            {
            "name": "Forgot Password",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/forgot-password",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "forgot-password"]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"test@example.com\"\n}"
                }
            }
            },
            {
            "name": "Reset Password",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/reset-password?token={{TOKEN}}",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "reset-password"],
                "query": [
                    { "key": "token", "value": "{{TOKEN}}" }
                ]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"password\": \"NewPassword123!\"\n}"
                }
            }
            },
            {
            "name": "Refresh Token",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/refresh-token",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "refresh-token"]
                }
            }
            },
            {
            "name": "Logout",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/auth/logout",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "auth", "logout"]
                }
            }
            }
        ]
        },
        {
        "name": "Trips",
        "item": [
            {
            "name": "Create Trip",
            "request": {
                "method": "POST",
                "header": [
                { "key": "Authorization", "value": "Bearer {{TOKEN}}" },
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/trips",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "trips"]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"tripName\": \"Paris Adventure\",\n  \"startDate\": \"2024-06-01\",\n  \"endDate\": \"2024-06-07\",\n  \"description\": \"Exploring the City of Light\",\n  \"destinationQuery\": \"Paris, France\"\n}"
                }
            },
            "event": [
                {
                "listen": "test",
                "script": {
                    "exec": [
                    "pm.test(\"Status code is 201\", function () {",
                    "    pm.response.to.have.status(201);",
                    "});",
                    "pm.test(\"Trip created successfully\", function () {",
                    "    const response = pm.response.json();",
                    "    pm.expect(response.data.tripName).to.eql(\"Paris Adventure\");",
                    "    pm.environment.set(\"TRIP_ID\", response.data.id);",
                    "});"
                    ],
                    "type": "text/javascript"
                }
                }
            ]
            },
            {
            "name": "Get Trip Details",
            "request": {
                "method": "GET",
                "header": [
                { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/trips/{{TRIP_ID}}",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "trips", "{{TRIP_ID}}"]
                }
            }
            },
            {
            "name": "Update Trip Status",
            "request": {
                "method": "PUT",
                "header": [
                { "key": "Authorization", "value": "Bearer {{TOKEN}}" },
                { "key": "Content-Type", "value": "application/json" }
                ],
                "url": {
                "raw": "{{BASE_URL}}/api/trips/{{TRIP_ID}}/status",
                "host": ["{{BASE_URL}}"],
                "path": ["api", "trips", "{{TRIP_ID}}", "status"]
                },
                "body": {
                "mode": "raw",
                "raw": "{\n  \"status\": \"ACTIVE\"\n}"
                }
            }
            }
        ]
        },
    {
    "name": "Journal Entries",
    "item": [
        {
        "name": "Create Journal Entry",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" },
            { "key": "Content-Type", "value": "application/json" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/journal-entries",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "journal-entries"]
            },
            "body": {
            "mode": "raw",
            "raw": "{\n  \"tripId\": \"{{TRIP_ID}}\",\n  \"title\": \"First Day in Paris\",\n  \"content\": \"Arrived in Paris and visited the Eiffel Tower. The view was absolutely breathtaking!\",\n  \"date\": \"2024-06-01\",\n  \"isPublic\": true\n}"
            }
        },
        "event": [
            {
            "listen": "test",
            "script": {
                "exec": [
                "pm.test(\"Journal entry created\", function () {",
                "    const response = pm.response.json();",
                "    pm.expect(response.data.title).to.eql(\"First Day in Paris\");",
                "    pm.environment.set(\"JOURNAL_ENTRY_ID\", response.data.id);",
                "});"
                ],
                "type": "text/javascript"
            }
            }
        ]
        },
        {
        "name": "List Journal Entries",
        "request": {
            "method": "GET",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/journal-entries?search=Eiffel Tower&tripId={{TRIP_ID}}",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "journal-entries"],
            "query": [
                { "key": "search", "value": "Eiffel Tower" },
                { "key": "tripId", "value": "{{TRIP_ID}}" }
            ]
            }
        }
        },
        {
        "name": "Get Journal Entry",
        "request": {
            "method": "GET",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/journal-entries/{{JOURNAL_ENTRY_ID}}",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "journal-entries", "{{JOURNAL_ENTRY_ID}}"]
            }
        }
        },
        {
        "name": "Update Journal Entry",
        "request": {
            "method": "PATCH",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" },
            { "key": "Content-Type", "value": "application/json" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/journal-entries/{{JOURNAL_ENTRY_ID}}",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "journal-entries", "{{JOURNAL_ENTRY_ID}}"]
            },
            "body": {
            "mode": "raw",
            "raw": "{\n  \"title\": \"Updated Title\",\n  \"content\": \"Updated content\"\n}"
            }
        }
        },
        {
        "name": "Delete Journal Entry",
        "request": {
            "method": "DELETE",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/journal-entries/{{JOURNAL_ENTRY_ID}}",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "journal-entries", "{{JOURNAL_ENTRY_ID}}"]
            }
        }
        }
    ]
    },
    {
    "name": "Photos",
    "item": [
        {
        "name": "Upload Photo",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/upload",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "upload"]
            },
            "body": {
            "mode": "formdata",
            "formdata": [
                { "key": "file", "type": "file", "src": "" },
                { "key": "journalEntryId", "type": "text", "value": "{{JOURNAL_ENTRY_ID}}" },
                { "key": "caption", "type": "text", "value": "Eiffel Tower at sunset" },
                { "key": "isPublic", "type": "text", "value": "true" },
                { "key": "provider", "type": "text", "value": "s3" }
            ]
            }
        },
        "event": [
            {
            "listen": "test",
            "script": {
                "exec": [
                "pm.test(\"Photo uploaded successfully\", function () {",
                "    const response = pm.response.json();",
                "    pm.expect(response.data.url).to.exist;",
                "    pm.environment.set(\"PHOTO_ID\", response.data.id);",
                "});"
                ],
                "type": "text/javascript"
            }
            }
        ]
        },
        {
        "name": "Bulk Upload Photos",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/bulk-upload",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "bulk-upload"]
            },
            "body": {
            "mode": "formdata",
            "formdata": [
                { "key": "files", "type": "file", "src": "", "disabled": false },
                { "key": "journalEntryId", "type": "text", "value": "{{JOURNAL_ENTRY_ID}}" },
                { "key": "isPublic", "type": "text", "value": "true" },
                { "key": "provider", "type": "text", "value": "s3" },
                { "key": "captions", "type": "text", "value": "[\"Photo 1\", \"Photo 2\", \"Photo 3\"]" }
            ]
            }
        }
        },
        {
        "name": "Like Photo",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/{{PHOTO_ID}}/like",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "{{PHOTO_ID}}", "like"]
            }
        }
        },
        {
        "name": "Unlike Photo",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/{{PHOTO_ID}}/unlike",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "{{PHOTO_ID}}", "unlike"]
            }
        }
        },
        {
        "name": "Comment on Photo",
        "request": {
            "method": "POST",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" },
            { "key": "Content-Type", "value": "application/json" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/{{PHOTO_ID}}/comment",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "{{PHOTO_ID}}", "comment"]
            },
            "body": {
            "mode": "raw",
            "raw": "{\n  \"content\": \"Beautiful photo! Love the sunset colors.\"\n}"
            }
        }
        },
        {
        "name": "Get Photo Comments",
        "request": {
            "method": "GET",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/{{PHOTO_ID}}/comments",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "{{PHOTO_ID}}", "comments"]
            }
        }
        },
        {
        "name": "Get Photo Likes",
        "request": {
            "method": "GET",
            "header": [
            { "key": "Authorization", "value": "Bearer {{TOKEN}}" }
            ],
            "url": {
            "raw": "{{BASE_URL}}/api/photos/{{PHOTO_ID}}/likes",
            "host": ["{{BASE_URL}}"],
            "path": ["api", "photos", "{{PHOTO_ID}}", "likes"]
            }
        }
        }
    ]
    }
]
}
